{% extends "layout.html" %}

{% block title %}
    Search
{% endblock %}
{% block class %}search{% endblock %}
{% block main %}
<style>
.ui-autocomplete { max-height: 200px; overflow-y: scroll; overflow-x: hidden;}
</style>

<div class="jumbotron">
    <h1 class="display-4">Search recipes.</h1>
    <p class="lead">Tell us what's in your fridge to get the best recommendations.</p>
    <form class="form" action="/results" method="POST">
    <div class="form-group">

        <textarea id="Itemlist" name="itemlist" rows="3" readonly class="form-control" placeholder="Get started by adding some items below..."></textarea><br>
        </div>
        <div class="form-inline form-group">
            <input type="text" class="form-control bs-autocomplete-menu" id="ingredient_input" placeholder="Start typing to get suggestions..." style="width:88%" autocomplete="off">
            <a href="#" class="btn btn-primary" id="add" style="margin-left:2%">Add item</a><br>
        </div>

        <div class="form-group">
            <button class="btn btn-primary" type="submit" id="search">Search</button>
            <button class="btn btn-primary" type="iets" id="removelast">Remove last added item</button>
            <button class="btn btn-primary" type="clear" id="clear">Clear items</button>
        </div>
</form>

    <script src="/static/ingredients.js" type="text/javascript"></script>
    <script>
        $('#ingredient_input').autocomplete({
        source: ingredients
        });
    </script>

    <script>

        var previous_list;

        // Create a new list item when clicking on the "Add" button
        $('#add').on('click', function (e) {
          var li = document.createElement("li");
          var inputValue = document.getElementById("ingredient_input").value;
          var t = document.createTextNode(inputValue);
          li.appendChild(t);
          if (inputValue === '') {
            alert("You must write something!");
          }
          else {
            var $edit = $("#Itemlist");
            var curValue = $edit.val();
            previous_list = $edit.val();
            var newValue = curValue + inputValue + "\n";
            $edit.val(newValue);
          }
          document.getElementById("ingredient_input").value = "";
        });

        $('#clear').on('click', function (e) {
            var $edit = $("#Itemlist");
            $edit.val("");
        });

        $('#removelast').on('click', function (e) {
            var $edit = $("#Itemlist");
            $edit.val(previous_list);
        });

    </script>

{% endblock %}